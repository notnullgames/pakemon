local StateExploitDemo = {}

local menuExploits

function StateExploitDemo:enter()
  -- perform a query & build a menu from it
  local menu = {}
  for id, description, file in plugins.exploitdb:query("SELECT id, description, file FROM exploits WHERE description LIKE '%apache%'") do
    table.insert(menu, { description, function()  print(string.format('%s: %s', id, description)) end })
  end
  menuExploits = MenuManager({ menu })
  menuExploits:setTitle("Exploits with apache in description")
end

function StateExploitDemo:update(dt)
  menuExploits:update(dt)
end

function StateExploitDemo:draw()
  menuExploits:draw()
end

function StateExploitDemo:pressed(button)
  if button == 'b' then
    if currentPlane then
      currentPlane = nil
    else
      Gamestate.switch(StateMainMenu)
    end
  else
    if currentPlane then
    else
      menuExploits:pressed(button)
    end
  end
end

return StateExploitDemo