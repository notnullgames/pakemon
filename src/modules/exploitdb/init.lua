local sqlite3 = require "lib.lsqlite3"

-- register global game-states
StateExploitDemo = require "modules.exploitdb.state_exploite_demo"

local PluginExploitDemo = {}

function PluginExploitDemo:load()
  local realdir = love.filesystem.getRealDirectory('modules')
  PluginExploitDemo.conn, err = sqlite3.open(realdir .. "/modules/exploitdb/exploits.sqlite", "read")
  if err then
    print("Database error: " .. err)
  end
  table.insert(pakemon.menu.menuItems[2], { "Exploits", function()  Gamestate.switch(StateExploitDemo) end })
  pakemon.credits.text = pakemon.credits.text .. "Exploitdb is converted to sqlite from exploitdb data.\n"
end

function PluginExploitDemo:query(sql)
  return PluginExploitDemo.conn:prepare(sql)
end


return PluginExploitDemo